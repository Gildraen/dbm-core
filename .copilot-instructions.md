# GitHub Copilot Instructions

## Package Manager

- Use `yarn` instead of `npm` for all package management commands
- Use `yarn add` for runtime dependencies
- Use `yarn add -D` for dev dependencies
- Use `yarn install --frozen-lockfile` in CI/CD
- Use `yarn workspace` commands for monorepo operations

## Code Style & Standards

- Use TypeScript for all new files
- Prefer arrow functions over function declarations
- Use 2 spaces for indentation
- Always use semicolons
- Prefer const/let over var
- Use absolute imports with `app/` prefix (mapped to `src/` in tsconfig)
  - Example: `import { Config } from 'app/domain/config/Config'`
  - Example: `import { ModuleLoader } from 'app/domain/service/ModuleLoader'`
- Follow clean architecture patterns (domain, application, infrastructure layers)

## Project Structure

- Follow the established layered architecture:
  - `src/domain/` - Core business logic, entities, value objects
  - `src/application/` - Use cases and application services
  - `src/infrastructure/` - External concerns (CLI, databases, APIs)
- Place interfaces in `src/domain/interface/`
- Place types in `src/domain/types/`
- Use `tests/` directory mirroring `src/` structure

## Testing

- Use Vitest for testing (already configured)
- Place tests in `tests/` directory with same folder structure as `src/`
- Use `.test.ts` suffix for test files
- Write unit tests for domain logic
- Write integration tests for use cases
- Aim for high test coverage

## Git Workflow

- Main branch: `main`
- Feature branches: `feature/description` or `fix/description`
- Use conventional commits format
- Create PRs for all changes to main

## Release Strategy

- No automatic releases from main branch
- Use GitHub releases for stable versions
- Beta releases can be published from main for testing
- Manual release process preferred

## Discord Bot Specific

- Follow Discord.js patterns and best practices
- Use slash commands over legacy message commands
- Implement proper error handling for Discord API calls
- Use TypeScript types for Discord interactions

## Configuration

- Use environment-based configuration
- Store sensitive data in environment variables
- Validate configuration at startup
- Use the existing ConfigManager pattern

## Error Handling

- Use Result/Either patterns for error handling
- Avoid throwing exceptions in domain logic
- Log errors appropriately with context
- Return meaningful error messages

## Code Organization

- Keep functions small and focused
- Use dependency injection where appropriate
- Follow SOLID principles
- Prefer composition over inheritance
- Use TypeScript strict mode features
